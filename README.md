# Bosh lastpass plugin

[![Build Status](https://travis-ci.org/pivotal-cf/bosh_lastpass_plugin.svg?branch=master)](https://travis-ci.org/pivotal-cf/bosh_lastpass_plugin)

Store bosh secrets in lastpass instead of the manifest. 

## What is BOSH?
BOSH orchestrates initial deployments and ongoing updates that are: predictable, repeatable, reliable, self-healing, infrastructure-agnostic. You can take a look on [BOSH project on GitHub](https://github.com/cloudfoundry/bosh) and read more details in [docs](http://docs.cloudfoundry.org/bosh/).

## How to install
```
gem install bosh_lastpass_plugin
```

If `BOSH_USE_BUNDLER=true` is set in your environment, you would need to add the gem to the bosh bundle file located at `$GEM_HOME/gems/bosh_cli-$BOSH_VERISON/bin/run_bosh_with_bundler.Gemfile`. The bosh version can be found using the `version` subcommand on the bosh cli. 

## How to use

Use the `lpass` method in your deployment manifest to extract credentials out of lpass

For example:
```yaml
---
name: foo-deploy

director_uuid: 76f2d2b1-fc3f-47d2-bbfe-4109dc799887

releases:
  - name: &my-release
    version: latest

stemcells:
  - alias: trusty
    os: ubuntu-trusty
    version: latest

instance_groups:
  - name: my-job
    instances: 1
    jobs:
      - name: my-job
        release: *my-release
    vm_type: medium
    persistent_disk_type: ten
    stemcell: trusty
    networks:
      - name: my-job

properties:
  aws:
    access_key: <%= lpass "shared/aws", "username" %>
    secret_access_key: <%= lpass "shared/aws", "password" %>
```



## Contributing

1. Fork it
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create new Pull Request

## Notes

Generated by [BOSH plugin generator](https://github.com/Altoros/bosh-plugin-generator)
